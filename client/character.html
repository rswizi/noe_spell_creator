<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Character Manager</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="/static/character.css" rel="stylesheet" />
</head>
<body>
  <div class="wrap">
    <!-- Header -->
    <div class="panel">
      <div class="row grid-2">
        <div class="row" style="grid-template-columns:140px 1fr; gap:16px">
          <div>
            <img id="charAvatar" class="avatar" src="https://assets.forge-vtt.com/bazaar/core/icons/svg/mystery-man.svg" alt="">
            <div class="hint" style="margin-top:8px">
              <label class="pill">
                <span class="mini">Image URL</span>
                <input id="avatarUrl" class="input" placeholder="https://…" style="width:240px">
              </label>
            </div>
          </div>
          <div>
            <div class="title">Character</div>
            <div class="row grid-3">
              <label class="kpi">
                <span class="label">Name</span>
                <input id="c_name" class="input" placeholder="Akari of the East">
              </label>
              <label class="kpi">
                <span class="label">Level</span>
                <input id="c_level" type="number" min="1" max="100" class="input" value="1">
              </label>
              <label class="kpi">
                <span class="label">XP</span>
                <input id="c_xp" type="number" min="0" class="input" value="0">
              </label>
            </div>
            <div class="divider"></div>
            <div class="row grid-4">
              <span class="badge">MO: <b id="k_mo" class="mono">4</b></span>
              <span class="badge">Initiative: <b id="k_init" class="mono">4</b></span>
              <span class="badge">ET: <b id="k_et" class="mono">1</b></span>
              <span class="badge">Condition DC: <b id="k_cdc" class="mono">6</b></span>
            </div>
          </div>
        </div>

        <!-- Resource bars -->
        <div class="panel soft">
          <div class="title">Resources</div>
          <div class="row">
            <div class="row grid-3">
              <div class="kpi">
                <span class="label">HP</span>
                <div class="num"><span id="hp_cur">100</span>/<span id="hp_max">100</span></div>
                <div class="bar hp"><i id="hp_bar"></i></div>
              </div>
              <div class="kpi">
                <span class="label">SP</span>
                <div class="num"><span id="sp_cur">0</span>/<span id="sp_max">10</span></div>
                <div class="bar sp"><i id="sp_bar"></i></div>
              </div>
              <div class="kpi">
                <span class="label">EN</span>
                <div class="num"><span id="en_cur">5</span>/<span id="en_max">5</span></div>
                <div class="bar en"><i id="en_bar"></i></div>
              </div>
            </div>
            <div class="row grid-3">
              <div class="kpi">
                <span class="label">FO</span>
                <div class="num"><span id="fo_cur">2</span>/<span id="fo_max">2</span></div>
                <div class="bar fo"><i id="fo_bar"></i></div>
              </div>
              <div class="kpi">
                <span class="label">TX</span>
                <div class="num"><span id="tx_cur">0</span>/<span id="tx_max">0</span></div>
                <div class="bar tx"><i id="tx_bar"></i></div>
              </div>
              <div class="kpi">
                <span class="label">Enc</span>
                <div class="num"><span id="enc_cur">0</span>/<span id="enc_max">10</span></div>
                <div class="bar"><i id="enc_bar"></i></div>
              </div>
            </div>
            <div class="hint">Max values are derived. Current values will be editable in combat/inventory later.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="panel" style="margin-top:16px">
      <div class="tabs">
        <button class="tab active" data-tab="stats">Statistics</button>
        <button class="tab" data-tab="inventory">Inventory</button>
        <button class="tab" data-tab="abilities">Abilities</button>
        <button class="tab" data-tab="combat">Combat</button>
        <button class="tab" data-tab="personal">Personal</button>
      </div>

      <!-- Tab: Statistics -->
      <div class="tabpan active" id="tab-stats">
        <div class="row grid-3">
          <div class="panel soft">
            <div class="label">Skill Points</div>
            <div class="num mono"><span id="sp_used">0</span> / <span id="sp_max">40</span> <span class="mini">[cap <span id="skill_cap">3</span>]</span></div>
          </div>
          <div class="panel soft">
            <div class="label">Characteristic Points</div>
            <div class="num mono"><span id="cp_used">0</span> / <span id="cp_max">22</span> <span class="mini">[cap <span id="char_cap">10</span>]</span></div>
          </div>
          <div class="panel soft">
            <div class="label">Sublimation</div>
            <div class="num mono"><span id="sub_used">0</span> / <span id="sub_max">0</span></div>
            <div class="mini">Tier cap: <span id="sub_tier">1</span> (I–IV)</div>
          </div>
        </div>

        <!-- Sublimations -->
        <div class="panel" style="margin-top:16px">
          <div class="row" style="grid-template-columns:1fr auto; align-items:center">
            <div class="title">Sublimations</div>
            <button id="btnAddSub" class="btn subtle">Add Sublimation</button>
          </div>
          <table class="tbl" id="subTable">
            <thead>
              <tr>
                <th style="width:260px">Type</th>
                <th>Skill (for Excellence)</th>
                <th style="width:160px">Tier</th>
                <th class="right" style="width:70px">Slots</th>
                <th style="width:60px"></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div class="hint">Types: Lethality, Excellence (choose a skill), Blessing, Defense, Speed, Devastation, Clarity, Endurance.</div>
        </div>

        <!-- Characteristics & Skills -->
        <div class="panel" style="margin-top:16px">
          <div class="title">Characteristics & Skills</div>
          <div id="charSkillContainer"></div>
        </div>

        <!-- Intensities -->
        <div class="panel" style="margin-top:16px">
          <div class="title">Intensities</div>
          <table class="tbl" id="intensityTable">
            <thead>
            <tr>
              <th>Name</th>
              <th>Invested</th>
              <th>Modifier</th>
              <th>Base Value</th>
              <th>ID</th>
              <th>IV</th>
              <th class="right">Res/Wk</th>
            </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div class="hint">Specialist rule & resistance/weakness grid are computed automatically.</div>
        </div>
      </div>

      <!-- Tab: Inventory -->
      <div class="tabpan" id="tab-inventory">
        <div class="title">Inventory</div>
        <p class="muted">To be wired later.</p>
      </div>

      <!-- Tab: Abilities -->
      <div class="tabpan" id="tab-abilities">
        <div class="title">Abilities</div>
        <p class="muted">Coming soon.</p>
      </div>

      <!-- Tab: Combat -->
      <div class="tabpan" id="tab-combat">
        <div class="title">Combat</div>
        <p class="muted">Coming soon.</p>
      </div>

      <!-- Tab: Personal -->
      <div class="tabpan" id="tab-personal">
        <div class="row grid-2">
          <div class="panel soft">
            <div class="row grid-3">
              <label><span class="label">Height</span><input id="p_height" class="input" placeholder="175 cm"></label>
              <label><span class="label">Weight</span><input id="p_weight" class="input" placeholder="70 kg"></label>
              <label><span class="label">Birthday</span><input id="p_bday" class="input" placeholder="TBD"></label>
            </div>
          </div>
          <div class="panel soft">
            <label><span class="label">Backstory</span><textarea id="p_backstory" class="input" rows="6" placeholder="Who are they?"></textarea></label>
            <label style="margin-top:8px"><span class="label">Player Notes</span><textarea id="p_notes" class="input" rows="6" placeholder="Anything else"></textarea></label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script defer src="/static/js/character.js"></script>
</body>
</html>