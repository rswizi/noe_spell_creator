<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Campaign Manager</title>
  <link rel="stylesheet" href="/static/style.css" />
  <style>
    :root{
      color-scheme: dark;
      --ink:#f5f2ee;
      --bg:#0b0b12;
      --bg-2:#131326;
      --accent:#d1a348;
      --accent-2:#3a7fd1;
      --border:#2a2a3a;
    }
    body{
      margin:0;
      color:var(--ink);
      font-family:"Palatino Linotype","Book Antiqua","Georgia",serif;
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(209,163,72,0.2), transparent 55%),
        radial-gradient(900px 500px at 100% 0%, rgba(58,127,209,0.25), transparent 50%),
        linear-gradient(180deg, #0b0b12 0%, #0a0a0f 100%);
      min-height:100vh;
    }
    .page{max-width:980px;margin:0 auto;padding:32px 16px 64px;}
    .topbar{display:flex;align-items:center;gap:12px;margin-bottom:18px;}
    .topbar h1{margin:0;font-size:2rem;letter-spacing:.5px;}
    .topbar .right{margin-left:auto;}
    .hero{padding:18px;border:1px solid var(--border);border-radius:18px;background:linear-gradient(135deg, rgba(18,18,30,0.95), rgba(12,12,20,0.9));box-shadow:0 14px 40px rgba(0,0,0,0.35);}
    .hero p{margin:6px 0 0;opacity:.8;}
    .grid{display:grid;gap:16px;margin-top:20px;}
    @media(min-width:720px){ .grid{grid-template-columns:repeat(3,minmax(0,1fr));} }
    .card{
      border:1px solid var(--border);
      border-radius:18px;
      padding:16px;
      background:linear-gradient(160deg, rgba(19,19,38,0.95), rgba(10,10,18,0.9));
      display:grid;gap:10px;
      position:relative;
      overflow:hidden;
    }
    .card:before{
      content:"";
      position:absolute;inset:0;
      background:linear-gradient(120deg, transparent, rgba(209,163,72,0.07), transparent);
      opacity:.6;
      pointer-events:none;
    }
    .card h2{margin:0;font-size:1.1rem;}
    .card p{margin:0;opacity:.78;line-height:1.35;}
    .card a.btn{
      display:inline-flex;align-items:center;justify-content:center;
      border-radius:999px;border:1px solid #3a3a4a;
      padding:8px 12px;text-decoration:none;color:var(--ink);
      background:#141422;
    }
    .card a.btn:hover{background:#1c1c2e;border-color:#4a4a60;}
    .pill{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;border:1px solid #3a3a4a;font-size:.8rem;opacity:.8;}
  </style>
</head>
<body>
  <div class="page">
    <div class="topbar">
      <h1>Campaign Manager</h1>
      <span class="pill" id="login-chip">Not logged in</span>
      <a class="btn btn-secondary right" href="portal.html">Back to Portal</a>
    </div>

    <div class="hero">
      <strong>Choose what you want to do</strong>
      <p>Manage your campaigns, bring a character into a new story, or create a fresh campaign hub.</p>
    </div>

    <div class="grid">
      <div class="card">
        <h2>My Campaigns</h2>
        <p>See all campaigns you own or joined. Open one to view characters and details.</p>
        <a class="btn" href="campaigns_my.html">Open list</a>
      </div>
      <div class="card">
        <h2>Join New</h2>
        <p>Enter a join code and link a character, or create a new one just for this campaign.</p>
        <a class="btn" href="campaigns_join.html">Join a campaign</a>
      </div>
      <div class="card">
        <h2>Create Campaign</h2>
        <p>Name your campaign, add a description, and set an optional avatar.</p>
        <a class="btn" href="campaigns_create.html">Create campaign</a>
      </div>
    </div>
  </div>

  <script>
    async function authHeaders(){
      const t = localStorage.getItem("auth_token") || "";
      return t ? { "Authorization":"Bearer " + t, "X-Auth-Token": t } : {};
    }
    async function checkMe(){
      try{
        const res = await fetch("/auth/me", { headers: await authHeaders() });
        const data = await res.json();
        if (data.status === "success"){
          document.getElementById("login-chip").textContent = `${data.username} (${data.role})`;
        }
      }catch{}
    }
    checkMe();
  </script>
</body>
</html>
